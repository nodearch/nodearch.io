"use strict";(self.webpackChunknodearch_website=self.webpackChunknodearch_website||[]).push([[657],{4250:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"getting-started/hello-world","title":"Hello World","description":"Before you start, make sure you have completed the installation steps for NodeArch and have the CLI ready to use.","source":"@site/docs/getting-started/hello-world.md","sourceDirName":"getting-started","slug":"/getting-started/hello-world","permalink":"/docs/getting-started/hello-world","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Installation","permalink":"/docs/getting-started/installation"}}');var t=n(4848),i=n(8453);const a={},o="Hello World",l={},d=[{value:"Step 1: Create a New Project",id:"step-1-create-a-new-project",level:2},{value:"Step 2: Explore the Project",id:"step-2-explore-the-project",level:2},{value:"Step 3: User Management Example",id:"step-3-user-management-example",level:2},{value:"Example: <code>user.controller.ts</code>",id:"example-usercontrollerts",level:3},{value:"Example: <code>user.service.ts</code>",id:"example-userservicets",level:3},{value:"Example: <code>user.repository.ts</code>",id:"example-userrepositoryts",level:3},{value:"Example: <code>user.middleware.ts</code>",id:"example-usermiddlewarets",level:3},{value:"Example: <code>user-inputs.validation.ts</code>",id:"example-user-inputsvalidationts",level:3},{value:"Example: <code>user.test.ts</code>",id:"example-usertestts",level:3},{value:"Example: <code>user.interface.ts</code>",id:"example-userinterfacets",level:3},{value:"Step 4: Start the App",id:"step-4-start-the-app",level:2},{value:"Build for Production",id:"build-for-production",level:2},{value:"Running Tests",id:"running-tests",level:2},{value:"Congratulations!",id:"congratulations",level:2}];function c(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"hello-world",children:"Hello World"})}),"\n",(0,t.jsxs)(s.p,{children:["Before you start, make sure you have completed the ",(0,t.jsx)(s.a,{href:"/docs/getting-started/installation",children:"installation steps"})," for NodeArch and have the CLI ready to use."]}),"\n",(0,t.jsx)(s.p,{children:"Let\u2019s build your first NodeArch application! In just a few steps, you\u2019ll scaffold a new project, and run a simple Express-powered server that responds to HTTP requests."}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-1-create-a-new-project",children:"Step 1: Create a New Project"}),"\n",(0,t.jsx)(s.p,{children:"Run the following command in your terminal:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"nodearch new\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Enter your project name and then select the ",(0,t.jsx)(s.code,{children:"express"})," template when prompted. This will scaffold a basic project structure using Express and TypeScript."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"? Your project name? hello-world\n? Select an app template\n\u276f express\n  socket.io\n  aws-sqs-listener\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-2-explore-the-project",children:"Step 2: Explore the Project"}),"\n",(0,t.jsx)(s.p,{children:"Your new project will have a structure like this:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-text",children:"hello-world/\n\u251c\u2500\u2500 public/docs/openapi.json\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.ts\n\u2502   \u2514\u2500\u2500 components/\n\u2502       \u251c\u2500\u2500 user.controller.ts\n\u2502       \u251c\u2500\u2500 user.service.ts\n\u2502       \u251c\u2500\u2500 user.repository.ts\n\u2502       \u251c\u2500\u2500 user.interface.ts\n\u2502       \u251c\u2500\u2500 user-inputs.validation.ts\n\u2502       \u251c\u2500\u2500 user.middleware.ts\n\u2502       \u2514\u2500\u2500 user.test.ts\n\u251c\u2500\u2500 .gitignore\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 nodearch\n"})}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"public/"})," - Contains static files and OpenAPI documentation."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"nodearch"})," \u2013 nodearch configuration file for your app metadata."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"src/"})," \u2013 The main source code directory."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"src/main.ts"})," \u2013 The entry point of your application. This is where the server starts and listens for incoming requests."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"src/components/"})," \u2013 Where all your logic lives."]}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-3-user-management-example",children:"Step 3: User Management Example"}),"\n",(0,t.jsx)(s.p,{children:"The generated project includes a simple user management API. Here\u2019s a summary of the main files:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user.controller.ts"}),": Defines HTTP endpoints for user operations (list, get by id, add user) and applies validation and middleware."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user.service.ts"}),": Contains business logic for user operations."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user.repository.ts"}),": Handles in-memory user data storage and queries."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user.interface.ts"}),": Defines the ",(0,t.jsx)(s.code,{children:"IUser"})," interface."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user-inputs.validation.ts"}),": Contains validation rules for user input."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user.middleware.ts"}),": Example middleware for user routes."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"user.test.ts"}),": Contains unit tests for the user service."]}),"\n"]}),"\n",(0,t.jsxs)(s.h3,{id:"example-usercontrollerts",children:["Example: ",(0,t.jsx)(s.code,{children:"user.controller.ts"})]}),"\n",(0,t.jsx)(s.p,{children:"This controller class defines the HTTP API for user management. It uses several decorators:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"@Controller()"})," marks the class as a controller component."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"@Tags(['User Management'])"})," adds OpenAPI tags for documentation."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"@Use(UserMiddleware)"})," applies middleware to all routes in this controller."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"@HttpPath('users')"})," sets the base path for all endpoints in this controller."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"@HttpGet"}),", ",(0,t.jsx)(s.code,{children:"@HttpPost"}),", ",(0,t.jsx)(s.code,{children:"@HttpParam"}),", ",(0,t.jsx)(s.code,{children:"@HttpQuery"}),", and ",(0,t.jsx)(s.code,{children:"@HttpBody"})," are used to define HTTP methods, route parameters, query parameters, and request bodies."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"@Use(ValidationMiddleware, createUserValidation)"})," applies validation to the POST endpoint."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["The controller delegates business logic to the injected ",(0,t.jsx)(s.code,{children:"UserService"})," and handles request/response mapping."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { Controller, Use } from '@nodearch/core';\nimport { HttpBody, HttpGet, HttpParam, HttpPath, HttpPost, HttpQuery } from '@nodearch/express';\nimport { ValidationMiddleware } from '@nodearch/joi-express';\nimport { Tags } from '@nodearch/openapi';\nimport { UserMiddleware } from './user.middleware.js';\nimport { IUser } from './user.interface.js';\nimport { UserService } from './user.service.js';\nimport { createUserValidation } from './user-inputs.validation.js';\n\n@Controller()\n@Tags(['User Management'])\n@Use(UserMiddleware)\n@HttpPath('users')\nexport class UserController {\n  constructor(private readonly userService: UserService) { }\n\n  @HttpGet('/')\n  async getUsers(@HttpQuery() user?: Partial<IUser>) {\n    return await this.userService.getUsers(user);\n  }\n\n  @HttpGet('/:id')\n  async getUserById(@HttpParam('id') id: string) {\n    return (await this.userService.getUsers({ id: parseInt(id) }))[0] || {};\n  }\n\n  @HttpPost('/')\n  @Use(ValidationMiddleware, createUserValidation)\n  async addUser(@HttpBody() user: Omit<IUser, 'id'>) {\n    await this.userService.addUser(user);\n    return 'ok';\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example-userservicets",children:["Example: ",(0,t.jsx)(s.code,{children:"user.service.ts"})]}),"\n",(0,t.jsxs)(s.p,{children:["This service class contains the business logic for user operations. Decorated with ",(0,t.jsx)(s.code,{children:"@Service()"}),", it is automatically registered as an injectable service. The constructor injects the ",(0,t.jsx)(s.code,{children:"UserRepository"})," dependency. The service provides methods to get users, add a user, and get a user by ID, abstracting away data access details from the controller."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { Service } from '@nodearch/core';\nimport { IUser } from './user.interface.js';\nimport { UserRepository } from './user.repository.js';\n\n@Service()\nexport class UserService {\n  constructor(private readonly userRepository: UserRepository) {}\n\n  async getUsers(criteria?: Partial<IUser>) {\n    return await this.userRepository.getUsers(criteria);\n  }\n\n  async addUser(user: Omit<IUser, 'id'>) {\n    const newUserId = await this.userRepository.getUsersCount() + 1;\n    await this.userRepository.addUser({\n      ...user,\n      id: newUserId\n    });\n  }\n\n  async getUserById(id: number) {\n    const users = await this.userRepository.getUsers({ id });\n    return users[0];\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example-userrepositoryts",children:["Example: ",(0,t.jsx)(s.code,{children:"user.repository.ts"})]}),"\n",(0,t.jsxs)(s.p,{children:["This repository class is decorated with ",(0,t.jsx)(s.code,{children:"@Repository()"}),", making it available for dependency injection. It manages an in-memory array of users and provides methods to query, add, count, and clear users. The repository abstracts data storage and retrieval, allowing the service to remain agnostic of the underlying data source."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { Repository } from '@nodearch/core';\nimport { IUser } from './user.interface.js';\n\n@Repository()\nexport class UserRepository {\n  private users: IUser[];\n\n  constructor() {\n    this.users = [\n      {\n        id: 1,\n        name: 'John Doe',\n        email: 'john.doe@email.com',\n        age: 30,\n        role: 'admin',\n        language: 'en'\n      },\n      {\n        id: 2,\n        name: 'Jane Doe',\n        email: 'jane.doe@email.com',\n        age: 25,\n        role: 'user',\n        language: 'fr'\n      }\n    ];\n  }\n\n  async getUsers(criteria?: Partial<IUser>) {\n    if (!criteria || !Object.keys(criteria).length) {\n      return this.users;\n    }\n\n    return this.users.filter(user => {\n      return Object.keys(criteria).every(key => user[key as keyof IUser] === criteria[key as keyof IUser]);\n    });\n  }\n\n  async addUser(user: IUser) {\n    this.users.push(user);\n  }\n\n  async getUsersCount() {\n    return this.users.length;\n  }\n\n  async removeAll() {\n    this.users = [];\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example-usermiddlewarets",children:["Example: ",(0,t.jsx)(s.code,{children:"user.middleware.ts"})]}),"\n",(0,t.jsxs)(s.p,{children:["This middleware class is decorated with ",(0,t.jsx)(s.code,{children:"@Middleware()"}),", allowing it to be applied to controllers or routes. The ",(0,t.jsx)(s.code,{children:"handler"})," method is executed before the request reaches the controller, and can be used for cross-cutting concerns such as authentication, logging, or request modification."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { Middleware } from '@nodearch/express';\n\n@Middleware()\nexport class UserMiddleware {\n  async handler() {\n    // Do something\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example-user-inputsvalidationts",children:["Example: ",(0,t.jsx)(s.code,{children:"user-inputs.validation.ts"})]}),"\n",(0,t.jsxs)(s.p,{children:["This file defines a Joi schema for validating incoming user data. The schema is used with the ",(0,t.jsx)(s.code,{children:"ValidationMiddleware"})," in the controller to ensure that requests to create users meet the required structure and constraints. This approach centralizes validation logic and keeps controllers clean."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import Joi from 'joi';\n\nexport const createUserValidation = Joi.object({\n  body: Joi.object({ \n    fullName: Joi.string().required(), \n    age: Joi.number().required(),\n    email: Joi.string().email().required(),\n    role: Joi.string().valid('admin', 'user').required(),\n    language: Joi.string().valid('en', 'fr', 'es').default('en')\n  }).required()\n});\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example-usertestts",children:["Example: ",(0,t.jsx)(s.code,{children:"user.test.ts"})]}),"\n",(0,t.jsxs)(s.p,{children:["This test class uses NodeArch's Mocha integration and is decorated with ",(0,t.jsx)(s.code,{children:"@Test()"}),". The constructor injects the ",(0,t.jsx)(s.code,{children:"UserService"})," and ",(0,t.jsx)(s.code,{children:"UserRepository"})," for testing. The ",(0,t.jsx)(s.code,{children:"@BeforeEach()"})," decorator resets the data before each test case. The ",(0,t.jsx)(s.code,{children:"@Case()"})," decorator defines individual test cases, including parameterized tests for different user IDs. This structure enables organized and maintainable unit tests for your business logic."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"import { BeforeEach, Case, Test } from '@nodearch/mocha';\nimport { UserService } from './user.service.js';\nimport { expect } from 'chai';\nimport { IUser } from './user.interface.js';\nimport { UserRepository } from './user.repository.js';\n\n@Test()\nexport class UserTest {\n  constructor(\n    private userService: UserService,\n    private userRepository: UserRepository\n  ) {}\n\n  @BeforeEach()\n  cleanupData() {\n    this.userRepository.removeAll();\n    this.userRepository.addUser({\n      id: 1,\n      name: 'John Doe',\n      email: 'john.d@email.com',\n      age: 20,\n      role: 'admin',\n      language: 'en'\n    });\n  }\n\n  @Case()\n  async getUsers() {\n    const users = await this.userService.getUsers();\n    expect(users).length(1);\n    expect(users[0].name).to.be.equal('John Doe');\n  }\n\n  @Case()\n  async addUser() {\n    const data: Omit<IUser, \"id\">  = {\n      name: 'Jane Doe', \n      email: 'jane.d@email.com',\n      age: 20,\n      role: 'admin',\n      language: 'fr' \n    };\n\n    await this.userService.addUser(data);\n\n    expect(await this.userRepository.getUsersCount()).to.be.equal(2);\n  }\n\n  @Case('Get User by existing Id', {params: { id: 1 }})\n  @Case('Get User by non-existing Id', {params: { id: 2 }})\n  async getUserById({ id }: { id: number }) {\n    const user = await this.userService.getUserById(id);\n    \n    if (id === 1) {\n      expect(user.name).to.be.equal('John Doe');\n    }\n    else if (id === 2) {\n      expect(user).to.be.undefined;\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(s.h3,{id:"example-userinterfacets",children:["Example: ",(0,t.jsx)(s.code,{children:"user.interface.ts"})]}),"\n",(0,t.jsxs)(s.p,{children:["This file defines the ",(0,t.jsx)(s.code,{children:"IUser"})," TypeScript interface, specifying the shape and types of user objects throughout the application. Using interfaces ensures type safety and consistency across services, repositories, and controllers."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:"export interface IUser {\n  id: number;\n  name: string;\n  email: string;\n  age: number;\n  role: 'user' | 'admin';\n  language: 'en' | 'fr' | 'es';\n}\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"step-4-start-the-app",children:"Step 4: Start the App"}),"\n",(0,t.jsx)(s.p,{children:"To run the app in watch mode (auto-reload on changes):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"nodearch start -w\n"})}),"\n",(0,t.jsx)(s.p,{children:"You should see something like:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"[INFO] [Express] Server running at: localhost:3000\n"})}),"\n",(0,t.jsxs)(s.p,{children:["Swagger (OpenAPI) documentation will be available at ",(0,t.jsx)(s.a,{href:"http://localhost:3000/docs",children:"http://localhost:3000/docs"})," after starting the app. You can also generate or update the OpenAPI docs at any time by running:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"nodearch openapi\n"})}),"\n",(0,t.jsx)(s.p,{children:"Now try the following endpoints:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"GET http://localhost:3000/api/users"})," \u2013 List all users"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"GET http://localhost:3000/api/users/1"})," \u2013 Get user by ID"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"POST http://localhost:3000/api/users"})," \u2013 Add a new user (with JSON body)"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Example request:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"curl http://localhost:3000/api/users\n"})}),"\n",(0,t.jsx)(s.p,{children:"Response:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'[\n  {\n    "id": 1,\n    "name": "John Doe",\n    "email": "john.doe@email.com",\n    "age": 30,\n    "role": "admin",\n    "language": "en"\n  },\n  {\n    "id": 2,\n    "name": "Jane Doe",\n    "email": "jane.doe@email.com",\n    "age": 25,\n    "role": "user",\n    "language": "fr"\n  }\n]\n'})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"build-for-production",children:"Build for Production"}),"\n",(0,t.jsx)(s.p,{children:"When you're ready to build your app for production:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"nodearch build\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This outputs a compiled version of your app into the ",(0,t.jsx)(s.code,{children:"dist/"})," directory."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"running-tests",children:"Running Tests"}),"\n",(0,t.jsxs)(s.p,{children:["NodeArch supports ",(0,t.jsx)(s.strong,{children:"Mocha"})," for writing and running tests:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"nodearch test\n"})}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"congratulations",children:"Congratulations!"}),"\n",(0,t.jsx)(s.p,{children:"You've just created and run your first NodeArch app! \ud83c\udf89"}),"\n",(0,t.jsx)(s.p,{children:"From here, you can:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"Add more services, repositories, and controllers"}),"\n",(0,t.jsx)(s.li,{children:"Use dependency injection"}),"\n",(0,t.jsx)(s.li,{children:"Add middleware and validation"}),"\n",(0,t.jsxs)(s.li,{children:["Explore lifecycle hooks (",(0,t.jsx)(s.code,{children:"onStart"}),", ",(0,t.jsx)(s.code,{children:"onStop"}),")"]}),"\n",(0,t.jsx)(s.li,{children:"Test your API with Mocha"}),"\n"]}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"NodeArch gives you a solid structure from day one \u2014 now go build something awesome."}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>a,x:()=>o});var r=n(6540);const t={},i=r.createContext(t);function a(e){const s=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);